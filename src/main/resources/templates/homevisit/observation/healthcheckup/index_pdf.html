<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Induction Report </title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background: #fff;
            }

            .page-wrapper {
                width: 210mm;
                min-height: 297mm;
                padding: 20mm 15mm 30mm; /* top, left/right, bottom */
                margin: auto;
                background: #fff;
                position: relative;
            }

            .header, .footer {
                position: fixed;
                left: 0;
                right: 0;
                color: #333;
                font-size: 12px;
                text-align: center;
            }

            .header {
                top: 10mm;
            }

            .footer {
                bottom: 10mm;
            }

            .content {
                /*                margin-top: 10mm;
                                margin-bottom: 10mm;*/
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
                font-size: 12px;
            }

            th, td {
                border: 1px solid #000;
                padding: 6px;
                text-align: left;
            }

            th {
                background-color: #f0f0f0;
            }

            button {
                margin: 20px;
                padding: 10px 20px;
            }

            @media print {
                .no-print {
                    display: none;
                }
            }
        </style>
    </head>
    <body>

        <button class="no-print" onclick="downloadPDF()">Download PDF</button>

        <div id="pdfContent" class="page-wrapper">
            <!-- Header -->



            <!-- Main Content -->
            <div class="content">
                <h3 class="card-title">Mother Health Condition </h3>

                <div th:each="o_MHConditions,status:${o_MHConditions}">
                    <table class="table table-bordered">
                        <tr><th>Mother Master Code</th> <td th:text="${o_MHConditions.motherMasterCode.motherMasterCode}">Chakma</td>
                            <th>Observation Duration</th> <td th:text="${o_MHConditions.observationDuration}+'Day'">Chakma</td>
                        </tr><tr>

                            <th> Previous Disease</th> <td th:text="${o_MHConditions.previousDisease}">Chakma</td>
                            <th> Previous Treatment</th> <td th:text="${o_MHConditions.previousTreatment}">Chakma</td>
                        </tr><tr>

                        </tr><tr>
                            <th> Present Health Status</th> <td th:text="${o_MHConditions.preasentHealtsStatus}">Chakma</td>
                            <th> Nutrition Status </th> <td th:text="${o_MHConditions.nutritionStatus}">Chakma</td>
                        </tr><tr>
                            <th> Height(CM) </th> <td th:text="${o_MHConditions.height}">Chakma</td>
                            <th> Weight(KG) </th> <td th:text="${o_MHConditions.weight}">Chakma</td>
                        </tr>
                        <tr>
                            <th> Blood Pressure </th> <td th:text="${o_MHConditions.bloodPressure}">Chakma</td>
                            <th> TT </th> <td th:text="${o_MHConditions.tt}">Chakma</td>
                        </tr><tr>
                            <th> Eye Problem </th> <td th:text="${o_MHConditions.eyeProblem}">Chakma</td>
                            <th> Ear Problem </th> <td th:text="${o_MHConditions.earProblem}">Chakma</td>
                        </tr>

                        <tr>
                            <th> Gynecological Problem </th> <td th:text="${o_MHConditions.gynologicalProblem}">Chakma</td>
                            <th> Diabetes</th> <td th:text="${o_MHConditions.diabetes}">Chakma</td>
                        </tr>

                        <tr>
                            <th>  Heart Disease </th> <td th:text="${o_MHConditions.heart_disease}">Chakma</td>
                            <th>  </th> <td></td>
                        </tr><tr>
                            <th> Bony Fracture </th> <td th:text="${o_MHConditions.bonyFracture}">Chakma</td>
                            <th> Note</th> <td th:text="${o_MHConditions.note}">Chakma</td>
                        </tr>
                        <tr>
                            <th> Neurological Disease </th> <td th:text="${o_MHConditions.neurologicalDisease}">Chakma</td>
                            <th> Respiratory  Problem </th> <td th:text="${o_MHConditions.resporatoryProblem}">Chakma</td>
                        </tr><tr>
                            <th> UTI </th> <td th:text="${o_MHConditions.uti}">Chakma</td>
                            <th> Previous Report </th> <td th:text="${o_MHConditions.previousReport}">Chakma</td>
                        </tr><tr>
                            <th> Plan For Further Action </th> <td th:text="${o_MHConditions.planForFurtherAction}">Chakma</td>
                            <th> Other Important Findings </th> <td th:text="${o_MHConditions.otherImportantFindings}">Chakma</td>
                        </tr>
                    </table>
                </div>


                <h3>Child Health Condition</h3>


                <div th:each="o_CHealthConditions, status : ${o_CHealthConditions}">
                    <table class="table table-bordered table-striped">
                        <tr>
                            <td><strong>Sl. No.</strong></td>
                            <td th:text="${status.count}">1</td>
                        </tr>
                        <tr>
                            <td><strong>Mother Master Code</strong></td>
                            <td th:text="${o_CHealthConditions.motherMasterCode.motherMasterCode}"></td>
                        </tr>
                        <tr>
                            <td><strong>Child Master Code</strong></td>
                            <td th:text="${o_CHealthConditions.childMasterCode.childMasterCode}"></td>
                        </tr>
                        <tr>
                            <td><strong>Child Name</strong></td>
                            <td th:text="${o_CHealthConditions.childMasterCode.name}"></td>
                        </tr>
                        <tr>
                            <td><strong>Observation Duration/Day</strong></td>
                            <td th:text="${o_CHealthConditions.observationDuration}"></td>
                        </tr>
                        <tr>
                            <td><strong>Previous Disease</strong></td>
                            <td th:text="${o_CHealthConditions.previousDisease}"></td>
                        </tr>
                        <tr>
                            <td><strong>Previous Treatment</strong></td>
                            <td th:text="${o_CHealthConditions.previousTreatment}"></td>
                        </tr>
                        <tr>
                            <td><strong>Present Health Status</strong></td>
                            <td th:text="${o_CHealthConditions.preasentHealtsStatus}"></td>
                        </tr>
                        <tr>
                            <td><strong>Nutrition Status</strong></td>
                            <td th:text="${o_CHealthConditions.nutritionStatus}"></td>
                        </tr>
                        <tr>
                            <td><strong>Height (CM)</strong></td>
                            <td th:text="${o_CHealthConditions.height}"></td>
                        </tr>
                        <tr>
                            <td><strong>Weight (KG)</strong></td>
                            <td th:text="${o_CHealthConditions.weight}"></td>
                        </tr>
                        <tr>
                            <td><strong>Blood Pressure</strong></td>
                            <td th:text="${o_CHealthConditions.bloodPressure}"></td>
                        </tr>
                        <tr>
                            <td><strong>Ear Problem</strong></td>
                            <td th:text="${o_CHealthConditions.earProblem}"></td>
                        </tr>
                        <tr>
                            <td><strong>Eye Problem</strong></td>
                            <td th:text="${o_CHealthConditions.eyeProblem}"></td>
                        </tr>
                        <tr>
                            <td><strong>TT</strong></td>
                            <td th:text="${o_CHealthConditions.tt}"></td>
                        </tr>
                        <tr>
                            <td><strong>Heart Disease</strong></td>
                            <td th:text="${o_CHealthConditions.heart_disease}"></td>
                        </tr>
                        <tr>
                            <td><strong>Disability</strong></td>
                            <td th:text="${o_CHealthConditions.disability}"></td>
                        </tr>
                        <tr>
                            <td><strong>Bony Fracture</strong></td>
                            <td th:text="${o_CHealthConditions.bonyFracture}"></td>
                        </tr>
                        <tr>
                            <td><strong>Note</strong></td>
                            <td th:text="${o_CHealthConditions.note}"></td>
                        </tr>
                        <tr>
                            <td><strong>Neurological Disease</strong></td>
                            <td th:text="${o_CHealthConditions.neurologicalDisease}"></td>
                        </tr>
                        <tr>
                            <td><strong>Respiratory Problem</strong></td>
                            <td th:text="${o_CHealthConditions.resporatoryProblem}"></td>
                        </tr>
                        <tr>
                            <td><strong>UTI</strong></td>
                            <td th:text="${o_CHealthConditions.uti}"></td>
                        </tr>
                        <tr>
                            <td><strong>Previous Report</strong></td>
                            <td th:text="${o_CHealthConditions.previousReport}"></td>
                        </tr>
                        <tr>
                            <td><strong>Plan For Further Action</strong></td>
                            <td th:text="${o_CHealthConditions.planForFurtherAction}"></td>
                        </tr>
                        <tr>
                            <td><strong>Other Important Findings</strong></td>
                            <td th:text="${o_CHealthConditions.otherImportantFindings}"></td>
                        </tr>
                    </table>

                </div>

            </div>
        </div>

        <!-- Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

        <!-- PDF Script -->
        <script>
            async function downloadPDF() {
                const {jsPDF} = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');

                const content = document.getElementById('pdfContent');
                const canvas = await html2canvas(content, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true
                });

                const imgData = canvas.toDataURL('image/png');
                const imgProps = pdf.getImageProperties(imgData);
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;

                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save("induction-report.pdf");
            }
        </script>
    </body>
</html>